
## Les Dockerfiles 🤔 .[steps sbs]

<img src="./park-and-recs-ron-swanson.gif" style="width: 50vw;" />

/*
dev: beaucoup de sujets à traiter: tests, sécurité, performance, etc.
Maintenant, on doit aussi savoir créer des images Docker

Next: Sondage
*/

## Petit sondage 📊 .[steps sbs]

Le dev à tout faire doit-il maîtriser l'écriture de Dockerfile ?

- Qui est développeur ?
- Qui a déjà écrit un Dockerfile ?
- Qui comprend les principes de layers et de stages dans Docker ?


/*
Pour ceux qui ne savent pas
le layer: un niveau de construction d'une image. équivalent d'un commit dans un git
un stage: une image temporaire dans laquelle on peut faire des traîtement dont le résultat pourra être copié dans l'image finale

Next: Problèmes que j'ai rencontrés avec les Dockerfile
Syntaxe des Dockerfile
*/

## Un nouveau "langage" à apprendre 🤯

Quand tu décides de faire ton premier Dockerfile:

<img src="./bored-sigh.gif" style="width: 50vw;" />

/*
syntaxe en commandes: pas envie, on dirait du Cobol

Next: Pour comprendre, je vais lire un Dockerfile existant
*/

## Les Dockerfile sont souvent longs et complexes 📜

Quand tu lis un Dockerfile pour la première fois:

<img src="./theoffice-michael-scott.gif" style="width: 50vw;" />

/*
beaucoup de layers + les stages pas toujours bien séparés

On s'y perd

Next: Une fois qu'on a réussi à créer son image Docker, on se rend compte qu'on a pas respecté les bonnes pratiques pour l'envoyer en prod
*/

## Pas de "bonnes pratiques" par défaut 😑

Quand tu envoies en prod:

<img src="./silicon-valley-fire.gif" style="width: 50vw;" />

/*
La plus part des images Docker ne sont pas sécurisées par défaut

Next: Comment Dofigen tente de répondre à ces problèmes
*/

## Comment Dofigen tente de répondre à ces problèmes .[steps]

/*
Pour Lenra, on voulait une solution simple pour les devs de créer des images Docker pour la prod.
J'ai créé Dofigen comme un projet à part et qui est utilisé comme dépendance du CLI de Lenra.

Dofigen: Docker file generator

- syntaxe: simple à lire et à écrire + facile à modifier via un script + facile de voir les stages
- layers: ordre des définitions n'a pas d'importance (dans un même niveau) + Gestion de cache plus simple
- bonnes pratiques: rootless par défaut + `.dockerignore` dans le même fichier et peut être défini par ajout plutôt que suppression
*/

- Syntaxe en YAML (ou JSON) 📝
- Abstraction du concept de layers 📦
- Bonnes pratiques par défaut 😇
