
## ProblÃ¨mes avec les Dockerfile ğŸ¤” .[steps]


// En tant que dev, on a beaucoup de sujets Ã  traÃ®ter, les tests, la sÃ©curitÃ©, la performance, la lisibilitÃ©, la maintenabilitÃ©, etc.
// Et on a pas forcÃ©ment envie de passer du temps Ã  comprendre comment fonctionne la crÃ©ation de conteneurs pour dÃ©ployer nos projets.
// J'ai crÃ©Ã© Dofigen pour essayer de simplifier la crÃ©ation de Dockerfile et de rendre cette tÃ¢che plus accessible.

/*
dev: beaucoup de sujets Ã  traiter: tests, sÃ©curitÃ©, performance, lisibilitÃ©, maintenabilitÃ©, etc.
pas le temps et l'envie de comprendre les conteneurs

Avant de commencer, Sondage

Pour ceux qui ne savent pas
le layer est l'Ã©quivalent d'un commit dans un git
les builder


Voici quelques problÃ¨mes que j'ai rencontrÃ© avec les Dockerfile
*/

- Qui est dÃ©veloppeur ?
- Qui a dÃ©jÃ  Ã©crit un Dockerfile ?
- Qui comprend le principe des layers et du cache de build dans Docker ?
// Voir pour rÃ©duire la derniÃ¨re question

## Un nouveau "langage" Ã  apprendre ğŸ¤¯

Quand tu dÃ©cides de faire ton premier Dockerfile

<div class="tenor-gif-embed" data-postid="13597827" data-share-method="host" data-aspect-ratio="2.15517" data-width="60%"><a href="https://tenor.com/view/bored-sigh-computer-laptop-homework-gif-13597827">Bored Sigh GIF</a>from <a href="https://tenor.com/search/bored-gifs">Bored GIFs</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>

/*
syntaxe en commandes

- pas envie, on dirait du Cobol
- pas simple d'analyser ou de modifier un Dockerfile via un script
*/

## Les Dockerfile sont souvent longs et complexes ğŸ“œ

Quand tu lis un Dockerfile pour la premiÃ¨re fois

<div class="tenor-gif-embed" data-postid="18122359" data-share-method="host" data-aspect-ratio="1.77778" data-width="60%"><a href="https://tenor.com/view/theoffice-michael-scott-gif-18122359">Theoffice Michael Scott GIF</a>from <a href="https://tenor.com/search/theoffice-gifs">Theoffice GIFs</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>

/*
les layers et builders pas toujours bien compris
*/

## Pas de "bonnes pratiques" par dÃ©faut ğŸ˜‘

Quand tu envoies en prod

<div class="tenor-gif-embed" data-postid="11760880" data-share-method="host" data-aspect-ratio="1.78295" data-width="60%"><a href="https://tenor.com/view/silicon-valley-fire-server-maintenance-gif-11760880">Silicon Valley Fire GIF</a>from <a href="https://tenor.com/search/silicon+valley-gifs">Silicon Valley GIFs</a></div> <script type="text/javascript" async src="https://tenor.com/embed.js"></script>

/*
root par dÃ©faut sur la plus part des images
.gitignore fonctionnent Ã  l'inverse selon moi
*/

## Comment Dofigen tente de rÃ©pondre Ã  ces problÃ¨mes .[steps]

/*
Dofigen: Docker file generator

- syntaxe: simple Ã  lire et Ã  Ã©crire + facile Ã  modifier via un script (yq, jq) + facile de voir les builders
- layers: ordre des dÃ©finitions n'a pas d'importance (dans un mÃªme niveau) + Gestion de cache plus simple
- bonnes pratiques: rootless par dÃ©faut + `.gitignore` dans le mÃªme fichier et peut Ãªtre dÃ©fini par ajout  plutÃ´t que suppression
*/

- Syntaxe en YAML (ou JSON) ğŸ“
- Abstraction du concept de layers ğŸ“¦
- Bonnes pratiques par dÃ©faut ğŸ˜‡
