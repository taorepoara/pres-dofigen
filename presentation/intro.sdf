
## ğŸ¤” ProblÃ¨mes avec les Dockerfile .[steps]

/*
En tant que dev, on a beaucoup de sujets Ã  traÃ®ter, les tests, la sÃ©curitÃ©, la performance, la lisibilitÃ©, la maintenabilitÃ©, etc.
Et on a pas forcÃ©ment envie de passer du temps Ã  comprendre comment fonctionne la crÃ©ation de conteneurs pour dÃ©ployer nos projets.
J'ai crÃ©Ã© Dofigen pour essayer de simplifier la crÃ©ation de Dockerfile et de rendre cette tÃ¢che plus accessible.
*/

/*
Petit sondage:
qui est dev ?
parmi vous, qui a dÃ©jÃ  utilisÃ© Ã©crit un Dockerfile ?
qui comprends le principe des layers ?
qui sait comment fonctionne le cache de build ?
*/

/*
- langage: j'ai trouvÃ© Ã§a repoussant en dÃ©butant, on dirait du Cobol
- syntaxe: il est compliquÃ© d'analyser ou de modifier un Dockerfile via un script
- Dockerfile longs: 
  - concept des layers pas forcÃ©ment Ã©vident + pas toujours facile de comprendre pourquoi si on met une commande avant une autre Ã§a build plus
  - systÃ¨me de builders pas toujours bien compris + pourquoi je ne fais pas tout dans la mÃªme image ? Combien de fois je commence Ã  lire un Dockerfile et je me rends compte aprÃ¨s coup, que je suis passÃ© Ã  cÃ´tÃ© d'un petit `FROM`...
- bonnes pratiques:
  - la plus part des images sur Dockerhub sont en root par dÃ©faut + pas toujours simple pour les rendre compatibles rootless
  - les .gitingore fonctionnent Ã  l'inverse je trouve (on doit exclure ce qu'on ne veut pas plutÃ´t qu'inclure ce que l'on veut) et ils ne sont pas toujours dÃ©finis
*/

- Nouveau "langage" Ã  apprendre
- Une syntaxe en commandes
- Les Dockerfile sont souvent longs et complexes
- Pas de "bonnes pratiques" Ã©videntes de base

## Comment Dofigen tente de rÃ©pondre Ã  ces problÃ¨mes .[steps]

/*
Dofigen est un outil qui permet de gÃ©nÃ©rer des Dockerfile.

- yaml:
  - plus simple Ã  lire et Ã  Ã©crire
  - Plus facile Ã  modifier via un script (yq, jq, ...)
  - On peu Ã©viter les duplications via les ancres YAML
- layers:
  - l'ordre des dÃ©finitions n'a pas d'importance (dans un mÃªme niveau)
  - Gestion de cache plus simple pour que les layers soient moins dÃ©pendants les uns des autres
- syntaxe:
  - Plus facile de voir quand il y a des builders
  - On peut rÃ©utiliser les builders dans d'autres images
- bonnes pratiques:
  - Les images sont en rootless par dÃ©faut
  - La dÃ©finition du `.gitignore` sont inclus dans le mÃªme fichier
*/

- DÃ©finition de la configuration en YAML (ou JSON) ğŸ§‘â€ğŸ’»
- Abstraction du concept de layers ğŸ“¦
- Syntaxe plus simple Ã  lire et Ã  Ã©crire ğŸ“
- Bonnes pratiques par dÃ©faut ğŸ˜‡
