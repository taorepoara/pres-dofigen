/::
custom_css: custom.css
::/

# üêã Simplifiez la conteneurisation de vos id√©es !

// Attention √† la pr√©sentation (√©viter de se pr√©senter en tant que CTO pour pas que √ßa soit pris comme un produit qu'on veut vendre)

## Probl√®mes avec les Dockerfile (2 min)

// En tant que dev, on a beaucoup de sujets √† tra√Æter, les tests, la s√©curit√©, la performance, la lisibilit√©, la maintenabilit√©, etc. Et on a pas forc√©ment envie de passer du temps √† apprendre un nouveau langage pour faire de la conteneurisation.

// Poser des questions (Qui connait le principe des layers ? Qui a d√©j√† eu des probl√®mes de cache ? Qui a d√©j√† eu des probl√®mes de s√©curit√© ?)

- Nouveau "langage" √† apprendre + j'ai trouv√© √ßa repoussant en d√©butant
- Il est compliqu√© de modifier un Dockerfile via un script
- Les Dockerfile sont souvent longs et complexes
-- concept des layers pas forc√©ment √©vident + pas toujours facile de comprendre pourquoi si on met une commande avant une autre √ßa build plus
-- syst√®me de builders pas toujours bien compris + pourquoi je ne fais pas tout dans la m√™me image ? Combien de fois je commence √† lire un Dockerfile et je me rends compte apr√®s coup, que je suis pass√© √† c√¥t√© d'un petit `FROM`...
- Pas de "bonnes pratiques" √©videntes de base
-- La plus part des images sur Dockerhub sont en root par d√©faut + pas toujours simple pour les rendre compatibles rootless
-- Les .gitingore fonctionnent √† l'inverse je trouve (on doit exclure ce qu'on ne veut pas plut√¥t qu'inclure ce que l'on veut) et ils ne sont pas toujours d√©finis

## Comment Dofigen tente de r√©pondre √† ces Probl√®mes (1 min)

// La nuance du mot "tente" attire la bienveillance du public

- D√©finition de la configuration dans un fichier YAML (ou JSON, mais je suis moins fan)
-- Plus simple √† lire et √† √©crire
-- Plus facile √† modifier via un script (yq, jq, ...)
-- On peu √©viter les duplications via les ancres YAML
- Abstraction du concept de layers
-- On peut mettre les commandes dans l'ordre que l'on veut, elles seront toujours plac√©es dans le bon ordre dans le Dockerfile
-- Gestion de cache plus simple pour que les layers soient moins d√©pendants les uns des autres
- S√©paration des builders dans un champ sp√©cifique
-- Plus facile de voir quand il y en a
-- chaque builder est ind√©pendant, on peut les r√©utiliser dans d'autres images
- Bonnes pratiques par d√©faut
-- Les images sont en rootless par d√©faut
-- Les fichiers `.gitignore` sont inclus dans le m√™me fichier

## D√©monstration (10 min)

A chaque √©tape (ou √† la fin de la d√©monstration), montrer la taille de l'image, le temps de build, le nombre de layers, la gestion du cache, les failles de s√©curit√© (comment ?)

### On part d'un Dockerfile pour build une image Spring Boot (lourde, prend du temps √† build et a de grosses failles de s√©curit√© [voir Docker benchmark])

```YAML

```

### On va le transformer en Dofigen

### On rajoute le gitignore

### On rajoute un builder pour s√©parer la compilation de l'ex√©cution

### On rajoute du cache dans le builder

### On rajoute un builder pour le test ?



## Conclusion (2 min)

### Benchmark
 
### Pousser plus loin

En tant que CI